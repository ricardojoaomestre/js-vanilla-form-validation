define("formValidatorConstants",{NAME:"FormValidator",INPUT_SELECTOR:"input,select,textarea",STATES:{DIRTY:"dirty",VIRTUALLY_DIRTY:"virtually_dirty",VISITED:"visited",SUBMITTED:"submitted",ERROR:"form-validator_error"},EVENTS:{SUBMIT_FORM:"submit"}}),define("formValidatorMethods",["formValidatorConstants"],function(t){function e(t,e){t&&t.classList&&t.classList.add(e)}function n(t,e){return t&&t.classList&&t.classList.contains(e)}function r(t,e){t&&t.classList&&t.classList.remove(e)}function a(t){var e=window.getComputedStyle(t);return null===t.offsetParent&&"none"!==e.display}function o(t,e){var n=[];return e&&e.length>0&&(n=e.filter(function(e){return e.sourceInput===t})),n}function i(e){if(e&&e.parentNode){var n=e.parentNode.querySelector("span."+t.STATES.ERROR);n&&n.classList&&(n.classList.add("hide"),e.setCustomValidity(""))}}function s(e,n){if(n&&n.length>0)for(var a,s=o(e,n),u=0;u<s.length;u++)a=s[u].errorMessageInput||s[u].sourceInput,i(a),r(a,t.STATES.VIRTUALLY_DIRTY),s[u].errorState=!0}function u(t){for(var e=0;e<t.length;e++)i(t[e])}function l(n){e(n.currentTarget,t.STATES.DIRTY)}function d(r){e(r.currentTarget,t.STATES.VISITED),n(r.currentTarget,t.STATES.DIRTY)&&this.validateInput(r.currentTarget)}function f(t){for(var e,n,r=!0,a=0;a<t.length;a++){e=t[a].element;for(var o in t[a].validation)if(t[a].validation[o]&&e.dataset.hasOwnProperty(o)){n=e.dataset[o],c(e,n),r=!1;break}}return r}function c(e,n){var r=e.parentNode.querySelector("span."+t.STATES.ERROR);r?(r.innerHTML=n,r.classList.remove("hide")):(r=document.createElement("SPAN"),r.innerHTML=n,r.classList.add(t.STATES.ERROR),e.parentNode.appendChild(r))}function m(t){return{element:t,validation:t.validity}}function v(t,e){var n=o(t,e);return h(n)}function T(t,e){var n=o(t,e);p(n)}function h(t){if(!t||0===t.length)return!0;for(var e,n=!0,r=0;n&&r<t.length;r++)e=t[r],n=e.validationMethod(),e.errorState=!!n,I(n,e);return n}function p(t){return!t||0===t.length||void S(t,0)}function S(n,r){if(!(r>n.length-1)){var a=n[r];a.validationMethod().then(function(o){a.errorMessageInput?s(a.errorMessageInput,n):s(a.sourceInput,n),a.success(o),e(a.sourceInput,t.STATES.VISITED),e(a.sourceInput,t.STATES.DIRTY),S(n,r+1)},function(t){var e=a.parser(t);e&&I(e,a),a.failure(t)})}}function I(n,r){"boolean"!=typeof n||n?"string"==typeof n&&n.length>0&&(r.errorMessageInput?(e(r.errorMessageInput,t.STATES.VIRTUALLY_DIRTY),r.errorMessageInput.setCustomValidity(n),c(r.errorMessageInput,n)):(r.sourceInput.setCustomValidity(n),c(r.sourceInput,n))):r.errorMessageInput?(e(r.errorMessageInput,t.STATES.VIRTUALLY_DIRTY),r.errorMessageInput.setCustomValidity(r.errorMessage),c(r.errorMessageInput,r.errorMessage)):(r.sourceInput.setCustomValidity(r.errorMessage),c(r.sourceInput,r.errorMessage))}var E={loadEvents:function(t,e){for(var n=0;n<t.formElements.length;n++)e&&e.validateOnChange&&t.formElements[n].addEventListener("change",l.bind(t)),e&&e.validateOnBlur&&t.formElements[n].addEventListener("blur",d.bind(t))},validateForm:function(n){var r=n.form.checkValidity(),o=[];if(u(n.formElements),e(n.form,t.STATES.SUBMITTED),!r)for(var i=n.formElements.length,s=0;s<i;s++){var l=n.formElements[s];a(l)||l.validity.valid||o.push(m(l))}var d=f(o),c=h(n.customValidations);p(n.asyncCustomValidations);return d&&c},validateInput:function(t,e){i(t);var n=t.checkValidity(),r=[];return n?(n=v(t,e.customValidations),n&&T(t,e.asyncCustomValidations)):(r.push(m(t)),f(r)),n},addCustomValidation:function(t,e,n,r,a){if(t&&e&&(!n||"string"==typeof n&&0!==n.length)){n&&e&&t.addEventListener(n,e);var o={sourceInput:t,validationMethod:e,errorMessage:r,errorMessageInput:a,errorState:!0};return o}throw"error: Wrong parameters."},addAsyncCustomValidation:function(t,e,n,r,a){if(t&&e&&"function"==typeof e&&n&&"function"==typeof n&&r&&"function"==typeof r){var o={sourceInput:t,validationMethod:e,parser:n,success:r,failure:a,errorState:!0};return o}throw"error: Invalid Paramters."},removeCustomValidation:function(t,e,n){if(!t||!n||"function"!=typeof n||e&&("string"!=typeof e||0===e.length))throw"error: Invalid Paramters.";t.removeEventListener(e,n)},removeValidations:function(e){u(e.formElements),r(e.form,t.STATES.SUBMITTED);for(var n=0;n<e.formElements.length;n++)r(e.formElements[n],t.STATES.DIRTY),r(e.formElements[n],t.STATES.VIRTUALLY_DIRTY),r(e.formElements[n],t.STATES.VISITED)},setValidationState:function(t,n){e(t,n)}};return E}),define("formValidator",["formValidatorMethods","formValidatorConstants"],function(t,e){var n=function(){if(this.form=null,this.formElements=null,this.customValidations=[],this.asyncCustomValidations=[],!(arguments&&arguments.length>=1))throw"error: invalid arguments. Please provide at least 1 argument to specify the form context";this.init(arguments[0],arguments[1]||{})};return n.prototype={init:function(n,r){if(this.form=n,r=r||{},r.validateOnBlur="undefined"==typeof r.validateOnBlur||r.validateOnBlur,r.validateOnChange="undefined"==typeof r.validateOnChange||r.validateOnChange,!this.form)throw e.NAME+" is not loaded!";this.formElements=this.form.querySelectorAll(e.INPUT_SELECTOR),t.loadEvents(this,r)},validateForm:function(){return t.validateForm(this)},validateInput:function(e){return t.validateInput(e,this)},addCustomValidation:function(e,n,r,a,o){var i=t.addCustomValidation(e,n,r,a,o);i&&this.customValidations.push(i)},removeCustomValidation:function(e,n,r,a,o){t.removeCustomValidation(e,n,r)},addAsyncCustomValidation:function(e,n,r,a,o){var i=t.addAsyncCustomValidation(e,n,r,a,o);i&&this.asyncCustomValidations.push(i)},removeValidations:function(){return t.removeValidations(this)},setValidationState:function(e,n){t.setValidationState(e,n)},validationStates:e.STATES},n});